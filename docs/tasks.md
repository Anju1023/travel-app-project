# タスク管理 (tasks.md)

## Phase 1: 土台作り (環境構築)

- [x] Next.js 16.1 プロジェクトの初期化
- [x] Tailwind CSS v4 の設定とカラーテーマ定義
- [x] 必要なライブラリのインストール (`@google/generative-ai`, `lucide-react` など)

## Phase 2: 見た目作り (UI 開発)

- [x] レイアウト作成 (ヘッダー・フッター)
- [x] 旅行条件入力フォームの作成
- [x] プラン表示画面のモックアップ作成

## Phase 3: 頭脳作り (API/ロジック連携)

- [x] Gemini API (3.0 Flash) の接続テスト (実装完了)
- [x] 旅行プラン生成用プロンプトの設計
- [x] Server Actions / API Route の実装
- [x] 生成中のローディング表示の実装

## Phase 4: ブラッシュアップ (仕上げ)

- [x] Gemini モデルを最新の `gemini-3-flash-preview` に更新
- [x] フォームに「こだわり条件」入力欄を追加
- [x] フォームに「旅行時期（いつ頃？）」入力欄を追加し、季節に合わせた提案ロジックを実装
- [x] エラーハンドリングの強化 (親しみやすいエラー表示への改善)
- [x] 日本語コメントの徹底とコードのリファクタリング (Geminiによる愛の解説付き)
- [x] ローディング中に「弾むカバン」アニメーションを追加
- [x] スマホ実機での表示確認・調整
- [x] 最終動作確認

## Phase 5: 機能拡張 (もっと便利に！)

- [x] プラン結果を Markdown 形式でコピーする機能の実装
  - [x] プラン結果画面に「クリップボードにコピー」ボタンを設置
  - [x] プランデータ (`PlanData`) を綺麗な Markdown 文字列に変換するロジックを作成
  - [x] コピー成功時に「コピーしたよ！」というフィードバック（トースト通知など）を表示

## Phase 6: 品質向上 & リファクタリング (プロの領域へ！🚀)

- [x] 🛡️ AIレスポンスの型安全性強化 (`zod`)
  - [x] `zod` ライブラリのインストール
  - [x] `PlanData` に対応する Zod スキーマの定義
  - [x] APIルートで、AIからのレスポンスを `parse` して検証する処理を追加
  - [x] 万が一のフォーマット不正時の再試行ロジック (エラーハンドリングで対応)

- [ ] 📱 UI/UX改善 (アコーディオン表示)
  - [ ] `components/ui/Accordion.tsx` (または類似) の作成、もしくは既存ロジックの改修
  - [ ] プラン結果の「○日目」をタップで開閉できるようにする (デフォルトは全て開く、または1日目だけ開く)

- [ ] 🧩 コンポーネント分割 (コードのお掃除)
  - [ ] `PlanResult.tsx` からタイムライン表示部分を `TimelineCard.tsx` に切り出し
  - [ ] `PlanResult.tsx` からホテル表示部分を `HotelList.tsx` に切り出し

## 現在のステータス: 🛠️ さらなる高みへ！品質向上フェーズに突入！
