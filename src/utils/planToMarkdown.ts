import { PlanData } from '@/types/plan';

/**
 * æ—…è¡Œãƒ—ãƒ©ãƒ³ã®ãƒ‡ãƒ¼ã‚¿ã‚’ Markdown å½¢å¼ã«å¤‰æ›ã™ã‚‹ã‚ˆï¼
 * Notion ã‚„ Slack ã«è²¼ã‚Šä»˜ã‘ãŸæ™‚ã«ç¶ºéº—ã«è¦‹ãˆã‚‹ã‚ˆã†ã«èª¿æ•´ã—ã¦ã„ã‚‹ã‚“ã ã€‚âœ¨
 */
export const convertPlanToMarkdown = (plan: PlanData): string => {
  // ã‚¿ã‚¤ãƒˆãƒ«
  let md = `# ${plan.title}\n\n`;

  // æ—¥ã”ã¨ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
  plan.days.forEach((day) => {
    md += `## ${day.day}æ—¥ç›®\n\n`;
    day.schedule.forEach((item) => {
      // æ™‚é–“ã¨å ´æ‰€ã‚’å¤ªå­—ã«
      md += `### ${item.time} ${item.place}\n`;
      // èª¬æ˜æ–‡
      md += `${item.description}\n\n`;
    });
  });

  // å®¿æ³Šå…ˆæƒ…å ±
  md += `## ãŠã™ã™ã‚ã®å®¿æ³Šå…ˆ ğŸ¨\n\n`;
  plan.hotels.forEach((hotel) => {
    md += `### ${hotel.name}\n`;
    md += `- **ã‚¨ãƒªã‚¢**: ${hotel.area}\n`;
    md += `- **ä¾¡æ ¼ç›®å®‰**: ${hotel.price}\n`;
    md += `- **ç‰¹å¾´**: ${hotel.features.join(' / ')}\n\n`;
  });

  // ãƒ•ãƒƒã‚¿ãƒ¼ã£ã½ã
  md += `---\n*Generated by Fuwari â˜ï¸*`;

  return md;
};
